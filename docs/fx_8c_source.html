<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Let There Be Light: render/fx.c ソースファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Let There Be Light
   </div>
   <div id="projectbrief">光よ、あれ！</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'検索');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','検索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('fx_8c_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fx.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fx_8c.html">[詳解]</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;glut.h&quot;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="config_8h.html">config.h</a>&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="state_8h.html">state.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fx_8h.html">render/fx.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="engine_8h.html">render/engine.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="texture_8h.html">render/texture.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="scene_8h.html">scene/scene.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="tile_8h.html">maze/tile.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="floodfill_8h.html">maze/floodfill.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="list_8h.html">util/list.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util/util.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="fx_8c.html#a177ec5d67004853afbbfc4abffaa6931">   22</a></span>&#160;<span class="preprocessor">#define FX_EXPLODE_DURATION       300</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#define FX_EXPLODE_STD_SIZE       1.2</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#define FX_FLOOD_DURADION         600</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#define FX_FLOOD_INFLEXION_POINT  0.1</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// ============ Fade In Effect ============ //</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="fx_8c.html#a46d55f715dc89c020da9520da18fa9df">   37</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a46d55f715dc89c020da9520da18fa9df">fxFadeInRender</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordtype">double</span> alpha = 1.0 - (double)animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> / animation-&gt;<a class="code" href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">frameCount</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  glColor4d(0.0, 0.0, 0.0, alpha);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  glRectd(<a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a5eeeb20fab9ff0f54568882b94d57921">left</a>, <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a24c109489bdfad4b0937c2d19d9c0e20">bottom</a>,</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;          <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#ab833bacb3fa8d1a189efcbba74f10fa1">right</a>, <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a4467598fbba812fe1339ab4e83806573">top</a>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;}</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="fx_8h.html#adfd4e0cfdbd86b121dda28ece43512f2">   45</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="fx_8c.html#adfd4e0cfdbd86b121dda28ece43512f2">fxFadeIn</a>(<span class="keywordtype">double</span> duration, <a class="code" href="struct_scene.html">Scene</a>* toScene) {</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="scene_8c.html#a7c3b1c9459f5ce7dee8eff5eae8394b9">switchScene</a>(toScene);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <a class="code" href="struct_animation.html">Animation</a>* animation = <a class="code" href="engine_8c.html#a22205f1cb2f14711d01dba79bbc8e5b5">createAnimation60FPS</a>(duration, 1);</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#a50359687acd53f36d7bfaaf5c155b8ae">render</a> = <a class="code" href="fx_8c.html#a46d55f715dc89c020da9520da18fa9df">fxFadeInRender</a>;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// ============ Fade Out Effect ============ //</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="fx_8c.html#ab8b1888a9261c6853760c3c32c789a5e">   59</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#ab8b1888a9261c6853760c3c32c789a5e">fxFadeOutComplete</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="struct_scene.html">Scene</a>* toScene = animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <a class="code" href="scene_8c.html#a7c3b1c9459f5ce7dee8eff5eae8394b9">switchScene</a>(toScene);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="fx_8c.html#ab4cf04c5e50f757d80b4347167eed1b4">   70</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#ab4cf04c5e50f757d80b4347167eed1b4">fxFadeOutRender</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordtype">double</span> alpha = (double)animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> / animation-&gt;<a class="code" href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">frameCount</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  glColor4d(0.0, 0.0, 0.0, alpha);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  glRectd(<a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a5eeeb20fab9ff0f54568882b94d57921">left</a>, <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a24c109489bdfad4b0937c2d19d9c0e20">bottom</a>,</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;          <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#ab833bacb3fa8d1a189efcbba74f10fa1">right</a>, <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">ortho</a>.<a class="code" href="struct_client_rect.html#a4467598fbba812fe1339ab4e83806573">top</a>);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="fx_8h.html#a8d363938f1ae471b2e526c1fcce7d6b3">   78</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a8d363938f1ae471b2e526c1fcce7d6b3">fxFadeOut</a>(<span class="keywordtype">double</span> duration, <a class="code" href="struct_scene.html">Scene</a>* toScene) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <a class="code" href="struct_animation.html">Animation</a>* animation = <a class="code" href="engine_8c.html#a22205f1cb2f14711d01dba79bbc8e5b5">createAnimation60FPS</a>(duration, 1);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#a50359687acd53f36d7bfaaf5c155b8ae">render</a> = <a class="code" href="fx_8c.html#ab4cf04c5e50f757d80b4347167eed1b4">fxFadeOutRender</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#ac58ece090aa02a962a2b251b6e12b3fe">complete</a> = <a class="code" href="fx_8c.html#ab8b1888a9261c6853760c3c32c789a5e">fxFadeOutComplete</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a> = toScene;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aa06ace24ee894fc832d84cbf2a066beb">cleanFlag</a> = <a class="code" href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a61f62c2ba72528b627708d6bb2aec594">ANIMATION_CLEAN_NONE</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// ============ Explode Effect ============ //</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="fx_8c.html#a34c5b45238bf63f9177dc6c071bf7b78">   93</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a34c5b45238bf63f9177dc6c071bf7b78">fxExplodeRender</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">int</span>* row = animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a>;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="structvec2d.html">vec2d</a>* start = animation-&gt;<a class="code" href="struct_animation.html#a51b6b08ce1d988617278ec2caf7dfdcf">from</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordtype">double</span>* size = animation-&gt;<a class="code" href="struct_animation.html#aefc25e7bfdb56dfe7d5d2a87eaaef5ad">delta</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  glPushMatrix();</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  glTranslated(start-&gt;<a class="code" href="structvec2d.html#af88b946fb90d5f08b5fb740c70e98c10">x</a>, start-&gt;<a class="code" href="structvec2d.html#ab927965981178aa1fba979a37168db2a">y</a>, 0.0);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  glScaled(*size, *size, 1.0);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  glTranslated(-start-&gt;<a class="code" href="structvec2d.html#af88b946fb90d5f08b5fb740c70e98c10">x</a>, -start-&gt;<a class="code" href="structvec2d.html#ab927965981178aa1fba979a37168db2a">y</a>, 0.0);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="comment">// centering sprite</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="texture_8c.html#a93bc054fe540984fa8c2384503b95f59">renderSprite</a>(<a class="code" href="texture_8c.html#af23748cfdc680620cca28b0c07b2ac61">FX_SPRITES</a>, *row, animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> - 1,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;               start-&gt;<a class="code" href="structvec2d.html#af88b946fb90d5f08b5fb740c70e98c10">x</a> - 0.5, start-&gt;<a class="code" href="structvec2d.html#ab927965981178aa1fba979a37168db2a">y</a> - 0.5, 1.0, 1.0);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  glPopMatrix();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="fx_8h.html#a7b11083a319318f8a90c1c30a30a4e5e">  109</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a7b11083a319318f8a90c1c30a30a4e5e">fxExplode</a>(<span class="keywordtype">int</span> spriteRow, <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> size) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="struct_animation.html">Animation</a>* animation = <a class="code" href="engine_8c.html#af1d8180d4edb31397330f4f7bccc0f18">createAnimation</a>(<a class="code" href="texture_8c.html#af23748cfdc680620cca28b0c07b2ac61">FX_SPRITES</a>-&gt;<a class="code" href="struct_sprite.html#a6281bf68a80743ca364af21ad6992924">cols</a>, <a class="code" href="fx_8c.html#a177ec5d67004853afbbfc4abffaa6931">FX_EXPLODE_DURATION</a>, 1);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="structvec2d.html">vec2d</a>* start = malloc(<span class="keyword">sizeof</span>(<a class="code" href="structvec2d.html">vec2d</a>));</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  start-&gt;<a class="code" href="structvec2d.html#af88b946fb90d5f08b5fb740c70e98c10">x</a> = x;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  start-&gt;<a class="code" href="structvec2d.html#ab927965981178aa1fba979a37168db2a">y</a> = y;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordtype">int</span>* row = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  *row = spriteRow;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordtype">double</span>* s = malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  *s = size;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a> = row;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#a51b6b08ce1d988617278ec2caf7dfdcf">from</a> = start;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aefc25e7bfdb56dfe7d5d2a87eaaef5ad">delta</a> = s;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aa06ace24ee894fc832d84cbf2a066beb">cleanFlag</a> = <a class="code" href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7afd153ea1d212730c969a0830a2eeaa52">ANIMATION_CLEAN_TARGET</a> | <a class="code" href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a5f39f89d2bc4dc422e116e7b63f2ce75">ANIMATION_CLEAN_FROM</a> | <a class="code" href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a1f04e7b8ffb816c90d9600af85d49469">ANIMATION_CLEAN_DELTA</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#a50359687acd53f36d7bfaaf5c155b8ae">render</a> = <a class="code" href="fx_8c.html#a34c5b45238bf63f9177dc6c071bf7b78">fxExplodeRender</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="fx_8h.html#a3d4998385ab0cbdd8ed1611ebbe33318">  130</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a3d4998385ab0cbdd8ed1611ebbe33318">fxExplodeAtTile</a>(<span class="keywordtype">int</span> spriteRow, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="fx_8c.html#a7b11083a319318f8a90c1c30a30a4e5e">fxExplode</a>(spriteRow, x + 0.5, y + 0.5, <a class="code" href="fx_8c.html#ac1a60d4e16c4e525851809774dac7fca">FX_EXPLODE_STD_SIZE</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// ============ Flood Effect ============ //</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="struct_fx_flood_record.html">  139</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a> {</div><div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="struct_fx_flood_record.html#a630509491834fb60cbbbe609ea67dcb9">  141</a></span>&#160;  <a class="code" href="struct_flood_state.html">FloodState</a>* <a class="code" href="struct_fx_flood_record.html#a630509491834fb60cbbbe609ea67dcb9">state</a>;</div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">  143</a></span>&#160;  <a class="code" href="struct_list.html">List</a>* <a class="code" href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">frontiers</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;} <a class="code" href="fx_8c.html#a3e8d9e7e183599b88a00da63060dc98a">FxFloodRecord</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a6502f0d1a14dfe51ce1e20e440ae3b56">fxFloodRender</a>(<a class="code" href="struct_animation.html">Animation</a>* animation);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#ae3548ec0473c9f6ceee99ac3b70ddfe7">fxFloodUpdate</a>(<a class="code" href="struct_animation.html">Animation</a>* animation);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a564429a69aaff125bd3cfef9515e8166">fxFloodFinish</a>(<a class="code" href="struct_animation.html">Animation</a>* animation);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="fx_8c.html#a0620de1ad844dcf87762dc327f384c17">  171</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a0620de1ad844dcf87762dc327f384c17">clearSpoiledTile</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a12089d24a674a3d083fde5556b5a343c">maze</a>[y][x] &amp; <a class="code" href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7a5d5b4dbb2bb490c213ae94e139f25481">TILE_SPOILED</a>) {</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="util_8h.html#a721b8038f5b6dbdb855ed58eedfac29e">clearBits</a>(<a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a12089d24a674a3d083fde5556b5a343c">maze</a>[y][x], <a class="code" href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7a5d5b4dbb2bb490c213ae94e139f25481">TILE_SPOILED</a>);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="fx_8c.html#a3d4998385ab0cbdd8ed1611ebbe33318">fxExplodeAtTile</a>(<a class="code" href="texture_8h.html#ae9e5d283224a2cac17587ddd4a07cc91">FX_SMOKE_ROW</a>, x + 0.5, y + 0.5);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="fx_8c.html#a7c84db2628a06afe3db594d879d716cb">  183</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a7c84db2628a06afe3db594d879d716cb">fxFloodNext</a>(<a class="code" href="struct_flood_state.html">FloodState</a>* state) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">if</span> (state-&gt;<a class="code" href="struct_flood_state.html#a9324389a5cdc532c6417a87ccafe18ce">finished</a>) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="floodfill_8c.html#ae63068a87333f61753d1b558c7715022">floodDestory</a>(state);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="floodfill_8c.html#a4f6248e8b8fff0e82053f548bfadfa6d">floodForward</a>(state);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>* record = malloc(<span class="keyword">sizeof</span>(<a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>));</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  record-&gt;<a class="code" href="struct_fx_flood_record.html#a630509491834fb60cbbbe609ea67dcb9">state</a> = state;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  record-&gt;<a class="code" href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">frontiers</a> = <a class="code" href="list_8c.html#acbeaa3e2cfab883dbe33b21960c62946">listClone</a>(state-&gt;<a class="code" href="struct_flood_state.html#a164223db94c49cf684d5f9023dcb913d">frontiers</a>, <span class="keyword">sizeof</span>(<a class="code" href="structvec2i.html">vec2i</a>));</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="struct_animation.html">Animation</a>* animation = <a class="code" href="engine_8c.html#a22205f1cb2f14711d01dba79bbc8e5b5">createAnimation60FPS</a>(<a class="code" href="fx_8c.html#aeab1c587e5c2cb6e41de6ca2b44736c6">FX_FLOOD_DURADION</a>, 1);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a> = record;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#a50359687acd53f36d7bfaaf5c155b8ae">render</a> = <a class="code" href="fx_8c.html#a6502f0d1a14dfe51ce1e20e440ae3b56">fxFloodRender</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#abcbb1d3d07f7567313b3ab4ded4289b6">update</a> = <a class="code" href="fx_8c.html#ae3548ec0473c9f6ceee99ac3b70ddfe7">fxFloodUpdate</a>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  animation-&gt;<a class="code" href="struct_animation.html#ac58ece090aa02a962a2b251b6e12b3fe">complete</a> = <a class="code" href="fx_8c.html#a564429a69aaff125bd3cfef9515e8166">fxFloodFinish</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="fx_8c.html#a036e695bbf2af2e9a8e609dbc0113d45">  210</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a036e695bbf2af2e9a8e609dbc0113d45">renderFrontiers</a>(<a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>* record, <span class="keywordtype">double</span> scale, <span class="keywordtype">double</span> alpha) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <a class="code" href="struct_list_iterator.html">ListIterator</a> it = <a class="code" href="list_8c.html#acf0004eb7a5746564989d19493570c8b">createListIterator</a>(record-&gt;<a class="code" href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">frontiers</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// enable alpha blend</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="texture_8c.html#a1a0f98fb47855777ebc795c1a8747b2b">setTexParam</a>(GL_MODULATE);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  glColor4d(alpha, alpha, alpha, alpha);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  <span class="keywordflow">while</span> (!it.<a class="code" href="struct_list_iterator.html#a1d39aac66e12dae50a24cd7a9100ef33">done</a>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="struct_node.html">Node</a>* node = it.<a class="code" href="struct_list_iterator.html#a3320f34637f150074fa6a52ebb884f9a">next</a>(&amp;it);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="structvec2i.html">vec2i</a>* frontier = node-&gt;<a class="code" href="struct_node.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">int</span> x = frontier-&gt;<a class="code" href="structvec2i.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">int</span> y = frontier-&gt;<a class="code" href="structvec2i.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">double</span> ox = x + 0.5;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">double</span> oy = y + 0.5;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="fx_8c.html#a0620de1ad844dcf87762dc327f384c17">clearSpoiledTile</a>(x, y);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">int</span> row, col;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7">Tile</a> tile = <a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a12089d24a674a3d083fde5556b5a343c">maze</a>[y][x];</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (tile &amp; <a class="code" href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7a4719c727495694da73225f1de43d10d6">TILE_COIN</a>) {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      row = <a class="code" href="texture_8h.html#a19db2e97a7b7990e47d5fd11b300ef36">COIN_ROW</a>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      col = <a class="code" href="texture_8h.html#adfe12161e102b2681441a8c918ac1255">COIN_COL</a>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tile &amp; <a class="code" href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7acf2017c50a4405c3f8974734ee6054c5">TILE_KERNEL</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      row = <a class="code" href="texture_8h.html#aaa1e8c937484533821d640dbdba85751">FIRE_ROW</a>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      col = <a class="code" href="texture_8h.html#a35573b7b3f7fb5702856dea852a30d1b">FIRE_COL</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      row = <a class="code" href="texture_8h.html#a71a431b37f0048362381e988e9435691">COIN_DARK_ROW</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      col = <a class="code" href="texture_8h.html#aa61f2ad9fefac1ab27cacb13a0f2b879">COIN_DARK_COL</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    glPushMatrix();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      glTranslated(ox, oy, 0.0);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      glScaled(scale, scale, 1.0);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      glTranslated(-ox, -oy, 0.0);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <a class="code" href="texture_8c.html#a93bc054fe540984fa8c2384503b95f59">renderSprite</a>(<a class="code" href="texture_8c.html#a2f8858307ec89674fcde0d3ee0fd3fef">MISC_SPRITES</a>, row, col, x, y, 1, 1);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    glPopMatrix();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="texture_8c.html#a6ddd3f74d751a58e01c0c653ce393f64">restoreDefaultTexParam</a>();</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="fx_8c.html#ae3548ec0473c9f6ceee99ac3b70ddfe7">  254</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#ae3548ec0473c9f6ceee99ac3b70ddfe7">fxFloodUpdate</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>* record = animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  uint16_t throttle = <a class="code" href="fx_8c.html#aa88c60ecdde436b574154d831de99295">FX_FLOOD_INFLEXION_POINT</a> * animation-&gt;<a class="code" href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">frameCount</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> &gt;= throttle) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="fx_8c.html#a7c84db2628a06afe3db594d879d716cb">fxFloodNext</a>(record-&gt;<a class="code" href="struct_fx_flood_record.html#a630509491834fb60cbbbe609ea67dcb9">state</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    animation-&gt;<a class="code" href="struct_animation.html#abcbb1d3d07f7567313b3ab4ded4289b6">update</a> = NULL; <span class="comment">// remove callback</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="fx_8c.html#a6502f0d1a14dfe51ce1e20e440ae3b56">  264</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a6502f0d1a14dfe51ce1e20e440ae3b56">fxFloodRender</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>* record = animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  uint16_t throttle = <a class="code" href="fx_8c.html#aa88c60ecdde436b574154d831de99295">FX_FLOOD_INFLEXION_POINT</a> * animation-&gt;<a class="code" href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">frameCount</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">double</span> percent;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> (animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> &lt; throttle) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    percent =(double)animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> / throttle;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    percent = 1.0 - (double)(animation-&gt;<a class="code" href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">currentFrame</a> - throttle) / (animation-&gt;<a class="code" href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">frameCount</a> - throttle);</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <a class="code" href="fx_8c.html#a036e695bbf2af2e9a8e609dbc0113d45">renderFrontiers</a>(record, percent, percent);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="fx_8c.html#a564429a69aaff125bd3cfef9515e8166">  279</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="fx_8c.html#a564429a69aaff125bd3cfef9515e8166">fxFloodFinish</a>(<a class="code" href="struct_animation.html">Animation</a>* animation) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <a class="code" href="struct_fx_flood_record.html">FxFloodRecord</a>* record = animation-&gt;<a class="code" href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">target</a>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="list_8c.html#a227e3db638a11e5ca265971f24b9e82f">listDestory</a>(record-&gt;<a class="code" href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">frontiers</a>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="fx_8h.html#ab1d0585332969d664493125c11cd82d1">  284</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="fx_8c.html#ab1d0585332969d664493125c11cd82d1">fxFlood</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="struct_flood_state.html">FloodState</a>* state = <a class="code" href="floodfill_8c.html#a61cf097a6a8559156c9edb20571202d1">floodGenerate</a>(<a class="code" href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a>.<a class="code" href="struct_state.html#a12089d24a674a3d083fde5556b5a343c">maze</a>, x, y);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="fx_8c.html#a3d4998385ab0cbdd8ed1611ebbe33318">fxExplodeAtTile</a>(<a class="code" href="texture_8h.html#a6639d55b652d29c6a4825e847d1c7a34">FX_EXPLODE_ROW</a>, x, y);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="fx_8c.html#a7c84db2628a06afe3db594d879d716cb">fxFloodNext</a>(state);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="fx_8c.html#a0620de1ad844dcf87762dc327f384c17">clearSpoiledTile</a>(x, y);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="ttc" id="fx_8c_html_a0620de1ad844dcf87762dc327f384c17"><div class="ttname"><a href="fx_8c.html#a0620de1ad844dcf87762dc327f384c17">clearSpoiledTile</a></div><div class="ttdeci">static void clearSpoiledTile(int x, int y)</div><div class="ttdoc">凍った地面をクリアする</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00171">fx.c:171</a></div></div>
<div class="ttc" id="texture_8h_html_aa61f2ad9fefac1ab27cacb13a0f2b879"><div class="ttname"><a href="texture_8h.html#aa61f2ad9fefac1ab27cacb13a0f2b879">COIN_DARK_COL</a></div><div class="ttdeci">#define COIN_DARK_COL</div><div class="ttdoc">黒いコインを表す列</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00055">texture.h:55</a></div></div>
<div class="ttc" id="structvec2d_html_ab927965981178aa1fba979a37168db2a"><div class="ttname"><a href="structvec2d.html#ab927965981178aa1fba979a37168db2a">vec2d::y</a></div><div class="ttdeci">double y</div><div class="ttdoc">y 座標</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00053">util.h:53</a></div></div>
<div class="ttc" id="engine_8h_html_afd5865e0a9007c544e6a96c11e5664f7afd153ea1d212730c969a0830a2eeaa52"><div class="ttname"><a href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7afd153ea1d212730c969a0830a2eeaa52">ANIMATION_CLEAN_TARGET</a></div><div class="ttdoc">animation.target のメモリ領域を解放する</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00070">engine.h:70</a></div></div>
<div class="ttc" id="engine_8h_html"><div class="ttname"><a href="engine_8h.html">engine.h</a></div><div class="ttdoc">タイムラインに基づいたアニメーションエンジン ＜ヘッダファイル＞</div></div>
<div class="ttc" id="struct_list_iterator_html"><div class="ttname"><a href="struct_list_iterator.html">ListIterator</a></div><div class="ttdoc">リストの繰り返し処理を抽象化する，リストイテレータオブジェクト</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00145">list.h:145</a></div></div>
<div class="ttc" id="state_8c_html_abfba619da78b9fc39d3e0aeb2c31ce99"><div class="ttname"><a href="state_8c.html#abfba619da78b9fc39d3e0aeb2c31ce99">GameState</a></div><div class="ttdeci">State GameState</div><div class="ttdoc">ゲーム全体の状態を表すグローバル変数</div><div class="ttdef"><b>Definition:</b> <a href="state_8c_source.html#l00016">state.c:16</a></div></div>
<div class="ttc" id="struct_animation_html_ac58ece090aa02a962a2b251b6e12b3fe"><div class="ttname"><a href="struct_animation.html#ac58ece090aa02a962a2b251b6e12b3fe">Animation::complete</a></div><div class="ttdeci">void(* complete)(struct Animation *)</div><div class="ttdoc">アニメーションが終わったときのコールバック関数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00138">engine.h:138</a></div></div>
<div class="ttc" id="struct_animation_html_abaf7d77bd2fc7eb6125fa605bd645b67"><div class="ttname"><a href="struct_animation.html#abaf7d77bd2fc7eb6125fa605bd645b67">Animation::frameCount</a></div><div class="ttdeci">int frameCount</div><div class="ttdoc">総計フレーム数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00094">engine.h:94</a></div></div>
<div class="ttc" id="texture_8c_html_a6ddd3f74d751a58e01c0c653ce393f64"><div class="ttname"><a href="texture_8c.html#a6ddd3f74d751a58e01c0c653ce393f64">restoreDefaultTexParam</a></div><div class="ttdeci">void restoreDefaultTexParam(void)</div><div class="ttdoc">テクスチャのパラメータを初期値に戻す</div><div class="ttdef"><b>Definition:</b> <a href="texture_8c_source.html#l00226">texture.c:226</a></div></div>
<div class="ttc" id="struct_fx_flood_record_html"><div class="ttname"><a href="struct_fx_flood_record.html">FxFloodRecord</a></div><div class="ttdoc">Flood の状態を記録するオブジェクト</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00139">fx.c:139</a></div></div>
<div class="ttc" id="floodfill_8h_html"><div class="ttname"><a href="floodfill_8h.html">floodfill.h</a></div><div class="ttdoc">Flood-fill アルゴリズム（ヘッダファイル）</div></div>
<div class="ttc" id="struct_client_rect_html_a24c109489bdfad4b0937c2d19d9c0e20"><div class="ttname"><a href="struct_client_rect.html#a24c109489bdfad4b0937c2d19d9c0e20">ClientRect::bottom</a></div><div class="ttdeci">double bottom</div><div class="ttdoc">矩形区間の下辺</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00029">state.h:29</a></div></div>
<div class="ttc" id="list_8c_html_acbeaa3e2cfab883dbe33b21960c62946"><div class="ttname"><a href="list_8c.html#acbeaa3e2cfab883dbe33b21960c62946">listClone</a></div><div class="ttdeci">List * listClone(List *src, size_t dataSize)</div><div class="ttdoc">既存のリストをクローンする</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00091">list.c:91</a></div></div>
<div class="ttc" id="struct_flood_state_html_a164223db94c49cf684d5f9023dcb913d"><div class="ttname"><a href="struct_flood_state.html#a164223db94c49cf684d5f9023dcb913d">FloodState::frontiers</a></div><div class="ttdeci">List * frontiers</div><div class="ttdoc">Flood の先頭</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8h_source.html#l00024">floodfill.h:24</a></div></div>
<div class="ttc" id="texture_8c_html_a2f8858307ec89674fcde0d3ee0fd3fef"><div class="ttname"><a href="texture_8c.html#a2f8858307ec89674fcde0d3ee0fd3fef">MISC_SPRITES</a></div><div class="ttdeci">Sprite * MISC_SPRITES</div><div class="ttdoc">アイテムとか，様々のものを含むスプライト</div><div class="ttdef"><b>Definition:</b> <a href="texture_8c_source.html#l00039">texture.c:39</a></div></div>
<div class="ttc" id="fx_8c_html_aa88c60ecdde436b574154d831de99295"><div class="ttname"><a href="fx_8c.html#aa88c60ecdde436b574154d831de99295">FX_FLOOD_INFLEXION_POINT</a></div><div class="ttdeci">#define FX_FLOOD_INFLEXION_POINT</div><div class="ttdoc">洪水アニメーションが次の場所に流れていく時刻</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00028">fx.c:28</a></div></div>
<div class="ttc" id="fx_8c_html_a6502f0d1a14dfe51ce1e20e440ae3b56"><div class="ttname"><a href="fx_8c.html#a6502f0d1a14dfe51ce1e20e440ae3b56">fxFloodRender</a></div><div class="ttdeci">static void fxFloodRender(Animation *animation)</div><div class="ttdoc">fxFlood アニメーションをレンダリングする</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00264">fx.c:264</a></div></div>
<div class="ttc" id="engine_8c_html_af1d8180d4edb31397330f4f7bccc0f18"><div class="ttname"><a href="engine_8c.html#af1d8180d4edb31397330f4f7bccc0f18">createAnimation</a></div><div class="ttdeci">Animation * createAnimation(int frameCount, double duration, int repeat)</div><div class="ttdoc">アニメーションを生成し，メインタイムラインに追加する</div><div class="ttdef"><b>Definition:</b> <a href="engine_8c_source.html#l00028">engine.c:28</a></div></div>
<div class="ttc" id="list_8c_html_acf0004eb7a5746564989d19493570c8b"><div class="ttname"><a href="list_8c.html#acf0004eb7a5746564989d19493570c8b">createListIterator</a></div><div class="ttdeci">ListIterator createListIterator(List *list)</div><div class="ttdoc">特定のリストに対して，イテレータを生成する</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00189">list.c:189</a></div></div>
<div class="ttc" id="fx_8c_html_ac1a60d4e16c4e525851809774dac7fca"><div class="ttname"><a href="fx_8c.html#ac1a60d4e16c4e525851809774dac7fca">FX_EXPLODE_STD_SIZE</a></div><div class="ttdeci">#define FX_EXPLODE_STD_SIZE</div><div class="ttdoc">標準の爆発サイズ</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00024">fx.c:24</a></div></div>
<div class="ttc" id="config_8h_html"><div class="ttname"><a href="config_8h.html">config.h</a></div><div class="ttdoc">ゲームの設定</div></div>
<div class="ttc" id="fx_8h_html"><div class="ttname"><a href="fx_8h.html">fx.h</a></div><div class="ttdoc">様々なエフェクト ＜ヘッダファイル＞</div></div>
<div class="ttc" id="texture_8h_html_a6639d55b652d29c6a4825e847d1c7a34"><div class="ttname"><a href="texture_8h.html#a6639d55b652d29c6a4825e847d1c7a34">FX_EXPLODE_ROW</a></div><div class="ttdeci">#define FX_EXPLODE_ROW</div><div class="ttdoc">爆発エフェクトの行</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00063">texture.h:63</a></div></div>
<div class="ttc" id="scene_8h_html"><div class="ttname"><a href="scene_8h.html">scene.h</a></div><div class="ttdoc">シーンコントローラーのプロトタイプ（ヘッダファイル）</div></div>
<div class="ttc" id="struct_sprite_html_a6281bf68a80743ca364af21ad6992924"><div class="ttname"><a href="struct_sprite.html#a6281bf68a80743ca364af21ad6992924">Sprite::cols</a></div><div class="ttdeci">GLuint cols</div><div class="ttdoc">スプライトの列数</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00082">texture.h:82</a></div></div>
<div class="ttc" id="fx_8c_html_a34c5b45238bf63f9177dc6c071bf7b78"><div class="ttname"><a href="fx_8c.html#a34c5b45238bf63f9177dc6c071bf7b78">fxExplodeRender</a></div><div class="ttdeci">static void fxExplodeRender(Animation *animation)</div><div class="ttdoc">爆発アニメーションをレンダリングする</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00093">fx.c:93</a></div></div>
<div class="ttc" id="floodfill_8c_html_a4f6248e8b8fff0e82053f548bfadfa6d"><div class="ttname"><a href="floodfill_8c.html#a4f6248e8b8fff0e82053f548bfadfa6d">floodForward</a></div><div class="ttdeci">void floodForward(FloodState *state)</div><div class="ttdoc">Flood を一回進める</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8c_source.html#l00041">floodfill.c:41</a></div></div>
<div class="ttc" id="texture_8h_html_aaa1e8c937484533821d640dbdba85751"><div class="ttname"><a href="texture_8h.html#aaa1e8c937484533821d640dbdba85751">FIRE_ROW</a></div><div class="ttdeci">#define FIRE_ROW</div><div class="ttdoc">火の玉を表す行</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00043">texture.h:43</a></div></div>
<div class="ttc" id="texture_8h_html"><div class="ttname"><a href="texture_8h.html">texture.h</a></div><div class="ttdoc">テクスチャ ＜ヘッダファイル＞</div></div>
<div class="ttc" id="struct_list_iterator_html_a1d39aac66e12dae50a24cd7a9100ef33"><div class="ttname"><a href="struct_list_iterator.html#a1d39aac66e12dae50a24cd7a9100ef33">ListIterator::done</a></div><div class="ttdeci">bool done</div><div class="ttdoc">イテレーションが終わったのか</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00172">list.h:172</a></div></div>
<div class="ttc" id="structvec2i_html_a6150e0515f7202e2fb518f7206ed97dc"><div class="ttname"><a href="structvec2i.html#a6150e0515f7202e2fb518f7206ed97dc">vec2i::x</a></div><div class="ttdeci">int x</div><div class="ttdoc">x 座標</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00041">util.h:41</a></div></div>
<div class="ttc" id="texture_8h_html_a71a431b37f0048362381e988e9435691"><div class="ttname"><a href="texture_8h.html#a71a431b37f0048362381e988e9435691">COIN_DARK_ROW</a></div><div class="ttdeci">#define COIN_DARK_ROW</div><div class="ttdoc">黒いコインを表す行</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00053">texture.h:53</a></div></div>
<div class="ttc" id="fx_8c_html_ae3548ec0473c9f6ceee99ac3b70ddfe7"><div class="ttname"><a href="fx_8c.html#ae3548ec0473c9f6ceee99ac3b70ddfe7">fxFloodUpdate</a></div><div class="ttdeci">static void fxFloodUpdate(Animation *animation)</div><div class="ttdoc">fxFlood アニメーションを更新する</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00254">fx.c:254</a></div></div>
<div class="ttc" id="fx_8c_html_a177ec5d67004853afbbfc4abffaa6931"><div class="ttname"><a href="fx_8c.html#a177ec5d67004853afbbfc4abffaa6931">FX_EXPLODE_DURATION</a></div><div class="ttdeci">#define FX_EXPLODE_DURATION</div><div class="ttdoc">爆発アニメーションの持続時間</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00022">fx.c:22</a></div></div>
<div class="ttc" id="fx_8c_html_a3d4998385ab0cbdd8ed1611ebbe33318"><div class="ttname"><a href="fx_8c.html#a3d4998385ab0cbdd8ed1611ebbe33318">fxExplodeAtTile</a></div><div class="ttdeci">void fxExplodeAtTile(int spriteRow, int x, int y)</div><div class="ttdoc">指定のタイルに標準サイズで爆発するアニメーション</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00130">fx.c:130</a></div></div>
<div class="ttc" id="struct_fx_flood_record_html_a164223db94c49cf684d5f9023dcb913d"><div class="ttname"><a href="struct_fx_flood_record.html#a164223db94c49cf684d5f9023dcb913d">FxFloodRecord::frontiers</a></div><div class="ttdeci">List * frontiers</div><div class="ttdoc">Flood の先頭</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00143">fx.c:143</a></div></div>
<div class="ttc" id="fx_8c_html_a036e695bbf2af2e9a8e609dbc0113d45"><div class="ttname"><a href="fx_8c.html#a036e695bbf2af2e9a8e609dbc0113d45">renderFrontiers</a></div><div class="ttdeci">static void renderFrontiers(FxFloodRecord *record, double scale, double alpha)</div><div class="ttdoc">Flood の先頭をレンダリングする（先頭にあるアイテムを示す）</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00210">fx.c:210</a></div></div>
<div class="ttc" id="struct_fx_flood_record_html_a630509491834fb60cbbbe609ea67dcb9"><div class="ttname"><a href="struct_fx_flood_record.html#a630509491834fb60cbbbe609ea67dcb9">FxFloodRecord::state</a></div><div class="ttdeci">FloodState * state</div><div class="ttdoc">Flood の状態</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00141">fx.c:141</a></div></div>
<div class="ttc" id="texture_8h_html_adfe12161e102b2681441a8c918ac1255"><div class="ttname"><a href="texture_8h.html#adfe12161e102b2681441a8c918ac1255">COIN_COL</a></div><div class="ttdeci">#define COIN_COL</div><div class="ttdoc">コインを表す列</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00050">texture.h:50</a></div></div>
<div class="ttc" id="tile_8h_html_acd2017d946fd818c3b8ca377bc4006c7a4719c727495694da73225f1de43d10d6"><div class="ttname"><a href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7a4719c727495694da73225f1de43d10d6">TILE_COIN</a></div><div class="ttdoc">コイン</div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00020">tile.h:20</a></div></div>
<div class="ttc" id="tile_8h_html_acd2017d946fd818c3b8ca377bc4006c7"><div class="ttname"><a href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7">Tile</a></div><div class="ttdeci">Tile</div><div class="ttdoc">タイル</div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00011">tile.h:11</a></div></div>
<div class="ttc" id="texture_8h_html_a19db2e97a7b7990e47d5fd11b300ef36"><div class="ttname"><a href="texture_8h.html#a19db2e97a7b7990e47d5fd11b300ef36">COIN_ROW</a></div><div class="ttdeci">#define COIN_ROW</div><div class="ttdoc">コインを表す行</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00048">texture.h:48</a></div></div>
<div class="ttc" id="list_8c_html_a227e3db638a11e5ca265971f24b9e82f"><div class="ttname"><a href="list_8c.html#a227e3db638a11e5ca265971f24b9e82f">listDestory</a></div><div class="ttdeci">void listDestory(List *list)</div><div class="ttdoc">リストを廃棄する</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00128">list.c:128</a></div></div>
<div class="ttc" id="fx_8c_html_ab1d0585332969d664493125c11cd82d1"><div class="ttname"><a href="fx_8c.html#ab1d0585332969d664493125c11cd82d1">fxFlood</a></div><div class="ttdeci">void fxFlood(int x, int y)</div><div class="ttdoc">水が迷路全体に流れていくようなアニメーション</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00284">fx.c:284</a></div></div>
<div class="ttc" id="scene_8c_html_a7c3b1c9459f5ce7dee8eff5eae8394b9"><div class="ttname"><a href="scene_8c.html#a7c3b1c9459f5ce7dee8eff5eae8394b9">switchScene</a></div><div class="ttdeci">void switchScene(Scene *nextScene)</div><div class="ttdoc">シーンを切り替える</div><div class="ttdef"><b>Definition:</b> <a href="scene_8c_source.html#l00011">scene.c:11</a></div></div>
<div class="ttc" id="fx_8c_html_a46d55f715dc89c020da9520da18fa9df"><div class="ttname"><a href="fx_8c.html#a46d55f715dc89c020da9520da18fa9df">fxFadeInRender</a></div><div class="ttdeci">static void fxFadeInRender(Animation *animation)</div><div class="ttdoc">fadeIn アニメーションをレンダリングする</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00037">fx.c:37</a></div></div>
<div class="ttc" id="structvec2i_html"><div class="ttname"><a href="structvec2i.html">vec2i</a></div><div class="ttdoc">int 型の2次元ベクトル</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00039">util.h:39</a></div></div>
<div class="ttc" id="fx_8c_html_a7c84db2628a06afe3db594d879d716cb"><div class="ttname"><a href="fx_8c.html#a7c84db2628a06afe3db594d879d716cb">fxFloodNext</a></div><div class="ttdeci">static void fxFloodNext(FloodState *state)</div><div class="ttdoc">Flood を 1 回進める</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00183">fx.c:183</a></div></div>
<div class="ttc" id="fx_8c_html_aeab1c587e5c2cb6e41de6ca2b44736c6"><div class="ttname"><a href="fx_8c.html#aeab1c587e5c2cb6e41de6ca2b44736c6">FX_FLOOD_DURADION</a></div><div class="ttdeci">#define FX_FLOOD_DURADION</div><div class="ttdoc">洪水アニメーションの持続時間</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00026">fx.c:26</a></div></div>
<div class="ttc" id="list_8h_html"><div class="ttname"><a href="list_8h.html">list.h</a></div><div class="ttdoc">双方向連結リスト ＜ヘッダファイル＞</div></div>
<div class="ttc" id="engine_8h_html_afd5865e0a9007c544e6a96c11e5664f7a1f04e7b8ffb816c90d9600af85d49469"><div class="ttname"><a href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a1f04e7b8ffb816c90d9600af85d49469">ANIMATION_CLEAN_DELTA</a></div><div class="ttdoc">animation.delta のメモリ領域を解放する</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00074">engine.h:74</a></div></div>
<div class="ttc" id="struct_animation_html_a50359687acd53f36d7bfaaf5c155b8ae"><div class="ttname"><a href="struct_animation.html#a50359687acd53f36d7bfaaf5c155b8ae">Animation::render</a></div><div class="ttdeci">void(* render)(struct Animation *)</div><div class="ttdoc">アニメーションのレンダリング関数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00130">engine.h:130</a></div></div>
<div class="ttc" id="floodfill_8c_html_ae63068a87333f61753d1b558c7715022"><div class="ttname"><a href="floodfill_8c.html#ae63068a87333f61753d1b558c7715022">floodDestory</a></div><div class="ttdeci">void floodDestory(FloodState *state)</div><div class="ttdoc">指定の Flood-fill を廃棄する</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8c_source.html#l00112">floodfill.c:112</a></div></div>
<div class="ttc" id="floodfill_8c_html_a61cf097a6a8559156c9edb20571202d1"><div class="ttname"><a href="floodfill_8c.html#a61cf097a6a8559156c9edb20571202d1">floodGenerate</a></div><div class="ttdeci">FloodState * floodGenerate(const Tile tiles[MAZE_SIZE][MAZE_SIZE], int startX, int startY)</div><div class="ttdoc">Flood-fill を指定のタイルで生成する</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8c_source.html#l00082">floodfill.c:82</a></div></div>
<div class="ttc" id="engine_8c_html_a22205f1cb2f14711d01dba79bbc8e5b5"><div class="ttname"><a href="engine_8c.html#a22205f1cb2f14711d01dba79bbc8e5b5">createAnimation60FPS</a></div><div class="ttdeci">Animation * createAnimation60FPS(double duration, int repeat)</div><div class="ttdoc">60 FPS のアニメーションを生成する</div><div class="ttdef"><b>Definition:</b> <a href="engine_8c_source.html#l00063">engine.c:63</a></div></div>
<div class="ttc" id="util_8h_html_a721b8038f5b6dbdb855ed58eedfac29e"><div class="ttname"><a href="util_8h.html#a721b8038f5b6dbdb855ed58eedfac29e">clearBits</a></div><div class="ttdeci">#define clearBits(target, mask)</div><div class="ttdoc">目標の変数に特定のビットをクリアする</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00034">util.h:34</a></div></div>
<div class="ttc" id="fx_8c_html_ab4cf04c5e50f757d80b4347167eed1b4"><div class="ttname"><a href="fx_8c.html#ab4cf04c5e50f757d80b4347167eed1b4">fxFadeOutRender</a></div><div class="ttdeci">static void fxFadeOutRender(Animation *animation)</div><div class="ttdoc">fadeOut アニメーションをレンダリングする</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00070">fx.c:70</a></div></div>
<div class="ttc" id="tile_8h_html"><div class="ttname"><a href="tile_8h.html">tile.h</a></div><div class="ttdoc">タイルの定義（ヘッダファイル）</div></div>
<div class="ttc" id="fx_8c_html_a3e8d9e7e183599b88a00da63060dc98a"><div class="ttname"><a href="fx_8c.html#a3e8d9e7e183599b88a00da63060dc98a">FxFloodRecord</a></div><div class="ttdeci">struct FxFloodRecord FxFloodRecord</div><div class="ttdoc">Flood の状態を記録するオブジェクト</div></div>
<div class="ttc" id="texture_8h_html_ae9e5d283224a2cac17587ddd4a07cc91"><div class="ttname"><a href="texture_8h.html#ae9e5d283224a2cac17587ddd4a07cc91">FX_SMOKE_ROW</a></div><div class="ttdeci">#define FX_SMOKE_ROW</div><div class="ttdoc">スモークエフェクトの行</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00071">texture.h:71</a></div></div>
<div class="ttc" id="util_8h_html"><div class="ttname"><a href="util_8h.html">util.h</a></div><div class="ttdoc">ユーティリティ ＜ヘッダファイル＞</div></div>
<div class="ttc" id="tile_8h_html_acd2017d946fd818c3b8ca377bc4006c7a5d5b4dbb2bb490c213ae94e139f25481"><div class="ttname"><a href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7a5d5b4dbb2bb490c213ae94e139f25481">TILE_SPOILED</a></div><div class="ttdoc">凍った地面</div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00025">tile.h:25</a></div></div>
<div class="ttc" id="fx_8c_html_a8d363938f1ae471b2e526c1fcce7d6b3"><div class="ttname"><a href="fx_8c.html#a8d363938f1ae471b2e526c1fcce7d6b3">fxFadeOut</a></div><div class="ttdeci">void fxFadeOut(double duration, Scene *toScene)</div><div class="ttdoc">次第に暗くなるアニメーション</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00078">fx.c:78</a></div></div>
<div class="ttc" id="struct_list_iterator_html_a3320f34637f150074fa6a52ebb884f9a"><div class="ttname"><a href="struct_list_iterator.html#a3320f34637f150074fa6a52ebb884f9a">ListIterator::next</a></div><div class="ttdeci">Node *(* next)(struct ListIterator *)</div><div class="ttdoc">イテレータを次のノードに移動させるメソッド</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00180">list.h:180</a></div></div>
<div class="ttc" id="structvec2d_html_af88b946fb90d5f08b5fb740c70e98c10"><div class="ttname"><a href="structvec2d.html#af88b946fb90d5f08b5fb740c70e98c10">vec2d::x</a></div><div class="ttdeci">double x</div><div class="ttdoc">x 座標</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00051">util.h:51</a></div></div>
<div class="ttc" id="struct_animation_html_aa15d1782a0d61976219146e1e4930f51"><div class="ttname"><a href="struct_animation.html#aa15d1782a0d61976219146e1e4930f51">Animation::target</a></div><div class="ttdeci">void * target</div><div class="ttdoc">ターゲットを記録するポイント変数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00085">engine.h:85</a></div></div>
<div class="ttc" id="tile_8h_html_acd2017d946fd818c3b8ca377bc4006c7acf2017c50a4405c3f8974734ee6054c5"><div class="ttname"><a href="tile_8h.html#acd2017d946fd818c3b8ca377bc4006c7acf2017c50a4405c3f8974734ee6054c5">TILE_KERNEL</a></div><div class="ttdoc">火の玉</div><div class="ttdef"><b>Definition:</b> <a href="tile_8h_source.html#l00022">tile.h:22</a></div></div>
<div class="ttc" id="structvec2i_html_a0a2f84ed7838f07779ae24c5a9086d33"><div class="ttname"><a href="structvec2i.html#a0a2f84ed7838f07779ae24c5a9086d33">vec2i::y</a></div><div class="ttdeci">int y</div><div class="ttdoc">y 座標</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00043">util.h:43</a></div></div>
<div class="ttc" id="struct_animation_html_aa06ace24ee894fc832d84cbf2a066beb"><div class="ttname"><a href="struct_animation.html#aa06ace24ee894fc832d84cbf2a066beb">Animation::cleanFlag</a></div><div class="ttdeci">AnimationCleanFlag cleanFlag</div><div class="ttdoc">アニメーションの後始末フラグ</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00125">engine.h:125</a></div></div>
<div class="ttc" id="struct_animation_html"><div class="ttname"><a href="struct_animation.html">Animation</a></div><div class="ttdoc">アニメーションオブジェクト</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00083">engine.h:83</a></div></div>
<div class="ttc" id="struct_animation_html_a51b6b08ce1d988617278ec2caf7dfdcf"><div class="ttname"><a href="struct_animation.html#a51b6b08ce1d988617278ec2caf7dfdcf">Animation::from</a></div><div class="ttdeci">void * from</div><div class="ttdoc">始まりの値を記録するポイント変数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00087">engine.h:87</a></div></div>
<div class="ttc" id="structvec2d_html"><div class="ttname"><a href="structvec2d.html">vec2d</a></div><div class="ttdoc">double 型の2次元ベクトル</div><div class="ttdef"><b>Definition:</b> <a href="util_8h_source.html#l00049">util.h:49</a></div></div>
<div class="ttc" id="state_8h_html"><div class="ttname"><a href="state_8h.html">state.h</a></div><div class="ttdoc">ゲームの状態 ＜ヘッダファイル＞</div></div>
<div class="ttc" id="struct_animation_html_abcbb1d3d07f7567313b3ab4ded4289b6"><div class="ttname"><a href="struct_animation.html#abcbb1d3d07f7567313b3ab4ded4289b6">Animation::update</a></div><div class="ttdeci">void(* update)(struct Animation *)</div><div class="ttdoc">アニメーションがアップデートするときのコールバック関数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00134">engine.h:134</a></div></div>
<div class="ttc" id="texture_8c_html_a1a0f98fb47855777ebc795c1a8747b2b"><div class="ttname"><a href="texture_8c.html#a1a0f98fb47855777ebc795c1a8747b2b">setTexParam</a></div><div class="ttdeci">void setTexParam(GLfloat param)</div><div class="ttdoc">テクスチャのパラメータを設定する</div><div class="ttdef"><b>Definition:</b> <a href="texture_8c_source.html#l00222">texture.c:222</a></div></div>
<div class="ttc" id="struct_node_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="struct_node.html#a735984d41155bc1032e09bece8f8d66d">Node::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">ノードに格納されるデータ</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00017">list.h:17</a></div></div>
<div class="ttc" id="engine_8h_html_afd5865e0a9007c544e6a96c11e5664f7a5f39f89d2bc4dc422e116e7b63f2ce75"><div class="ttname"><a href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a5f39f89d2bc4dc422e116e7b63f2ce75">ANIMATION_CLEAN_FROM</a></div><div class="ttdoc">animation.from のメモリ領域を解放する</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00072">engine.h:72</a></div></div>
<div class="ttc" id="fx_8c_html_adfd4e0cfdbd86b121dda28ece43512f2"><div class="ttname"><a href="fx_8c.html#adfd4e0cfdbd86b121dda28ece43512f2">fxFadeIn</a></div><div class="ttdeci">void fxFadeIn(double duration, Scene *toScene)</div><div class="ttdoc">次第に明るくなるアニメーション</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00045">fx.c:45</a></div></div>
<div class="ttc" id="struct_list_html"><div class="ttname"><a href="struct_list.html">List</a></div><div class="ttdoc">リストオブジェクト</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00027">list.h:27</a></div></div>
<div class="ttc" id="struct_state_html_a12089d24a674a3d083fde5556b5a343c"><div class="ttname"><a href="struct_state.html#a12089d24a674a3d083fde5556b5a343c">State::maze</a></div><div class="ttdeci">Tile maze[MAZE_SIZE][MAZE_SIZE]</div><div class="ttdoc">現在の迷路の構成</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00057">state.h:57</a></div></div>
<div class="ttc" id="texture_8c_html_af23748cfdc680620cca28b0c07b2ac61"><div class="ttname"><a href="texture_8c.html#af23748cfdc680620cca28b0c07b2ac61">FX_SPRITES</a></div><div class="ttdeci">Sprite * FX_SPRITES</div><div class="ttdoc">エフェクトのスプライト</div><div class="ttdef"><b>Definition:</b> <a href="texture_8c_source.html#l00040">texture.c:40</a></div></div>
<div class="ttc" id="texture_8h_html_a35573b7b3f7fb5702856dea852a30d1b"><div class="ttname"><a href="texture_8h.html#a35573b7b3f7fb5702856dea852a30d1b">FIRE_COL</a></div><div class="ttdeci">#define FIRE_COL</div><div class="ttdoc">火の玉を表す列</div><div class="ttdef"><b>Definition:</b> <a href="texture_8h_source.html#l00045">texture.h:45</a></div></div>
<div class="ttc" id="struct_state_html_a2590409326b69bdf595aa3f52f2c5df2"><div class="ttname"><a href="struct_state.html#a2590409326b69bdf595aa3f52f2c5df2">State::ortho</a></div><div class="ttdeci">ClientRect ortho</div><div class="ttdoc">現在の座標系</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00087">state.h:87</a></div></div>
<div class="ttc" id="struct_client_rect_html_ab833bacb3fa8d1a189efcbba74f10fa1"><div class="ttname"><a href="struct_client_rect.html#ab833bacb3fa8d1a189efcbba74f10fa1">ClientRect::right</a></div><div class="ttdeci">double right</div><div class="ttdoc">矩形区間の右辺</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00027">state.h:27</a></div></div>
<div class="ttc" id="fx_8c_html_a7b11083a319318f8a90c1c30a30a4e5e"><div class="ttname"><a href="fx_8c.html#a7b11083a319318f8a90c1c30a30a4e5e">fxExplode</a></div><div class="ttdeci">void fxExplode(int spriteRow, double x, double y, double size)</div><div class="ttdoc">爆発のアニメーション</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00109">fx.c:109</a></div></div>
<div class="ttc" id="struct_node_html"><div class="ttname"><a href="struct_node.html">Node</a></div><div class="ttdoc">ノード（節点）オブジェクト</div><div class="ttdef"><b>Definition:</b> <a href="list_8h_source.html#l00015">list.h:15</a></div></div>
<div class="ttc" id="struct_animation_html_ad7b94139e16da2759ff942c971b0bc90"><div class="ttname"><a href="struct_animation.html#ad7b94139e16da2759ff942c971b0bc90">Animation::currentFrame</a></div><div class="ttdeci">int currentFrame</div><div class="ttdoc">現在のフレーム</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00092">engine.h:92</a></div></div>
<div class="ttc" id="texture_8c_html_a93bc054fe540984fa8c2384503b95f59"><div class="ttname"><a href="texture_8c.html#a93bc054fe540984fa8c2384503b95f59">renderSprite</a></div><div class="ttdeci">void renderSprite(Sprite *sprite, uint32_t row, uint32_t col, double dx, double dy, double dw, double dh)</div><div class="ttdoc">スプライトをレンダリングする</div><div class="ttdef"><b>Definition:</b> <a href="texture_8c_source.html#l00230">texture.c:230</a></div></div>
<div class="ttc" id="struct_scene_html"><div class="ttname"><a href="struct_scene.html">Scene</a></div><div class="ttdoc">シーンコントローラー</div><div class="ttdef"><b>Definition:</b> <a href="scene_8h_source.html#l00009">scene.h:9</a></div></div>
<div class="ttc" id="fx_8c_html_ab8b1888a9261c6853760c3c32c789a5e"><div class="ttname"><a href="fx_8c.html#ab8b1888a9261c6853760c3c32c789a5e">fxFadeOutComplete</a></div><div class="ttdeci">static void fxFadeOutComplete(Animation *animation)</div><div class="ttdoc">fadeOut アニメーションが終わった後の処理（シーンの切り替え）</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00059">fx.c:59</a></div></div>
<div class="ttc" id="struct_flood_state_html_a9324389a5cdc532c6417a87ccafe18ce"><div class="ttname"><a href="struct_flood_state.html#a9324389a5cdc532c6417a87ccafe18ce">FloodState::finished</a></div><div class="ttdeci">bool finished</div><div class="ttdoc">Flood が全部のタイルに流れ込んだか</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8h_source.html#l00034">floodfill.h:34</a></div></div>
<div class="ttc" id="struct_client_rect_html_a5eeeb20fab9ff0f54568882b94d57921"><div class="ttname"><a href="struct_client_rect.html#a5eeeb20fab9ff0f54568882b94d57921">ClientRect::left</a></div><div class="ttdeci">double left</div><div class="ttdoc">矩形区間の左辺</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00031">state.h:31</a></div></div>
<div class="ttc" id="struct_flood_state_html"><div class="ttname"><a href="struct_flood_state.html">FloodState</a></div><div class="ttdoc">Flood の状態を表す</div><div class="ttdef"><b>Definition:</b> <a href="floodfill_8h_source.html#l00022">floodfill.h:22</a></div></div>
<div class="ttc" id="fx_8c_html_a564429a69aaff125bd3cfef9515e8166"><div class="ttname"><a href="fx_8c.html#a564429a69aaff125bd3cfef9515e8166">fxFloodFinish</a></div><div class="ttdeci">static void fxFloodFinish(Animation *animation)</div><div class="ttdoc">fxFlood アニメーションが終わった後の処理</div><div class="ttdef"><b>Definition:</b> <a href="fx_8c_source.html#l00279">fx.c:279</a></div></div>
<div class="ttc" id="engine_8h_html_afd5865e0a9007c544e6a96c11e5664f7a61f62c2ba72528b627708d6bb2aec594"><div class="ttname"><a href="engine_8h.html#afd5865e0a9007c544e6a96c11e5664f7a61f62c2ba72528b627708d6bb2aec594">ANIMATION_CLEAN_NONE</a></div><div class="ttdoc">何もしない</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00067">engine.h:67</a></div></div>
<div class="ttc" id="struct_client_rect_html_a4467598fbba812fe1339ab4e83806573"><div class="ttname"><a href="struct_client_rect.html#a4467598fbba812fe1339ab4e83806573">ClientRect::top</a></div><div class="ttdeci">double top</div><div class="ttdoc">矩形区間の上辺</div><div class="ttdef"><b>Definition:</b> <a href="state_8h_source.html#l00025">state.h:25</a></div></div>
<div class="ttc" id="struct_animation_html_aefc25e7bfdb56dfe7d5d2a87eaaef5ad"><div class="ttname"><a href="struct_animation.html#aefc25e7bfdb56dfe7d5d2a87eaaef5ad">Animation::delta</a></div><div class="ttdeci">void * delta</div><div class="ttdoc">変化量を記録するポイント変数</div><div class="ttdef"><b>Definition:</b> <a href="engine_8h_source.html#l00089">engine.h:89</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c30bb48f042946ebe97e62b65a0197ba.html">render</a></li><li class="navelem"><a class="el" href="fx_8c.html">fx.c</a></li>
    <li class="footer">2019年07月21日(日) 01時47分20秒作成 - Let There Be Light / 構成: 
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
